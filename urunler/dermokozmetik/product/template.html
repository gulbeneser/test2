 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/urunler/dermokozmetik/product/template.html b/urunler/dermokozmetik/product/template.html
index fc4830fd5651a96c44d5d1d0af359f7dbfff3d5e..9b92d83719b3fddc5c08817d41726d54c57d329e 100644
--- a/urunler/dermokozmetik/product/template.html
+++ b/urunler/dermokozmetik/product/template.html
@@ -514,53 +514,65 @@
       <div class="footer-brand">
         <img src="/urunler/assets/logos/logo.png" alt="Serakıncı Limited Logo" />
         <h1>Serakıncı Limited</h1>
       </div>
       <div class="footer-slogan">
         Hayvan Sağlığı, Cilt Güzelliği — Tek Adreste!
       </div>
     </div>
     <div class="footer-right">
       <a href="https://serakinci.com/">Ana Sayfa</a>
       <a href="https://serakinci.com/bizkimiz">Hakkımızda</a>
       <a href="https://serakinci.com/services">Hizmetlerimiz</a>
       <a href="https://serakinci.com/contact">İletişim</a>
       <a href="https://serakinci.com/careers">Kariyer</a>
       <a href="https://serakinci.com/faq">Sıkça Sorulan Sorular</a>
     </div>
   </footer>
   <div class="footer-bottom">
     © <span id="currentYear"></span> Serakıncı Limited. Tüm hakları saklıdır. | Powered by
     <a href="https://fures.tech" target="_blank">Fures Tech<img src="/urunler/assets/logos/fureslogo.png" alt="Fures Tech Logo"/></a>
   </div>
 
   <script type="module">
     import { GoogleGenerativeAI } from "@google/genai";
 
-    const GEMINI_API_KEY = "AIzaSyBEpqKAEZKYSyznxeZsQ1MYO-9hqV5LGoA"; 
+    const GEMINI_API_KEY = "AIzaSyBEpqKAEZKYSyznxeZsQ1MYO-9hqV5LGoA";
     const FALLBACK_IMAGE_URL = '/urunler/assets/logos/resimyok.png';
-    const API_BASE_PATH = '/urunler/api/'; 
+    const API_BASE_PATH = '/urunler/api/';
+    const LOCAL_IMAGE_BASE = `${API_BASE_PATH}gorseller/`;
+
+    function localImageUrl(product) {
+        if (!product || !product.ImageUrl || !product.ProductCode) return product?.ImageUrl || FALLBACK_IMAGE_URL;
+        const match = product.ImageUrl.match(/\.([a-zA-Z0-9]+)(?:[?#].*)?$/);
+        const ext = match ? match[1] : 'jpg';
+        return `${LOCAL_IMAGE_BASE}${product.ProductCode}.${ext}`;
+    }
+
+    function applyLocalImages(list) {
+        if (Array.isArray(list)) list.forEach(p => { p.ImageUrl = localImageUrl(p); });
+    }
     const GEMINI_SDK_LOADED = typeof GoogleGenerativeAI !== 'undefined';
     
     const segment = 'dermokozmetik'; 
     let allProducts = []; 
     let allProductsForHeaderSearch = []; 
     let currentProduct = null; 
     
     let favorites = [];
     let searchDebounceTimer; 
     let headerSearchDebounceTimer; 
     let G_isMouseOverDropdown = false; 
     let G_isMouseOverHeaderDropdown = false; 
 
     // --- AI Fonksiyonları ---
     async function generateEnhancedProductInfo(productName, productKategori, languageCode, existingProductInfo = {}) {
         if (!GEMINI_SDK_LOADED) throw new Error("Yapay zeka modülü (SDK) yüklenemedi.");
         if (!GEMINI_API_KEY || GEMINI_API_KEY.includes("PLACEHOLDER")) { 
             if (GEMINI_API_KEY === "AIzaSyBEpqKAEZKYSyznxeZsQ1MYO-9hqV5LGoA" && !GEMINI_API_KEY.includes("PLACEHOLDER")) {
                 // Demo key
             } else {
                  throw new Error("Gemini API anahtarı yapılandırılmamış.");
             }
         }
         const genAI = new GoogleGenerativeAI(GEMINI_API_KEY);
         const model = genAI.getGenerativeModel({ 
diff --git a/urunler/dermokozmetik/product/template.html b/urunler/dermokozmetik/product/template.html
index fc4830fd5651a96c44d5d1d0af359f7dbfff3d5e..9b92d83719b3fddc5c08817d41726d54c57d329e 100644
--- a/urunler/dermokozmetik/product/template.html
+++ b/urunler/dermokozmetik/product/template.html
@@ -761,51 +773,51 @@
     }
 
     function slugify(text) { 
         if (text === null || typeof text === 'undefined') return 'isimsiz-urun';
         let str = String(text);
         const trMap = { 'ç': 'c', 'Ç': 'C', 'ğ': 'g', 'Ğ': 'G', 'ı': 'i', 'İ': 'I', 'ö': 'o', 'Ö': 'O', 'ş': 's', 'Ş': 'S', 'ü': 'u', 'Ü': 'U' };
         for (let key in trMap) { str = str.replace(new RegExp(key, 'g'), trMap[key]); }
         str = str.normalize('NFD').replace(/[\u0300-\u036f]/g, '');
         str = str.replace(/\//g, ''); 
         str = str.replace(/\./g, '');
         str = str.toLowerCase();
         str = str.replace(/(\d+)\s+(sensibio)/g, '$1$2'); 
         const birimler = 'ml|gr|l|kg|mg|cm|m|lt'; 
         str = str.replace(new RegExp(`\\b(${birimler})\\s+(shower|gel)\\b`, 'gi'), '$1$2'); 
         str = str.replace(new RegExp(`(\\d+)\\s*(${birimler})\\b`, 'gi'), '$1-$2');
         str = str.replace(/\s+/g, '-');      
         str = str.replace(/[^\w-]+/g, '-'); 
         str = str.replace(/--+/g, '-');     
         str = str.replace(/^-+|-+$/g, '');  
         return str || 'isimsiz-urun';
     }
 
     function getSlugFromUrl() { 
       const pathname = window.location.pathname;
       const parts = pathname.split('/');
-      if (parts.length >= 5 && parts[3] === 'product' && parts[4]) { return parts[4]; }
+      if (parts.length >= 5 && (parts[3] === 'product' || parts[3] === 'product-pages') && parts[4]) { return parts[4]; }
       return '';
     }
     
     async function fetchJsonData(fileName) {
         try {
             const response = await fetch(`${API_BASE_PATH}${fileName}`);
             if (!response.ok) {
                 if (response.status === 404) {
                     throw new Error(`Dosya bulunamadı: ${API_BASE_PATH}${fileName}`);
                 } else {
                     throw new Error(`Dosya yüklenirken ağ hatası: ${API_BASE_PATH}${fileName} (${response.status} ${response.statusText})`);
                 }
             }
             return await response.json();
         } catch (error) {
             console.error(`fetchJsonData Hata (${fileName}):`, error);
             throw error;
         }
     }
 
     function showError(msg) {
       const detailContainer = document.getElementById('productDetailContainer');
       if (!detailContainer) { return; }
       const backLinkText = segment === 'dermokozmetik' ? 'Tüm Dermokozmetik Ürünlerine Dön' : 'Hayvan Sağlığı Ürünlerine Dön';
       detailContainer.innerHTML = `<div class="error-container"><h2>Bir Sorun Oluştu</h2><p>${msg}</p><a href="/urunler/${segment}/" class="back-button-modern" style="margin-top:1rem;"><span class="back-icon">←</span> ${backLinkText}</a></div>`;
diff --git a/urunler/dermokozmetik/product/template.html b/urunler/dermokozmetik/product/template.html
index fc4830fd5651a96c44d5d1d0af359f7dbfff3d5e..9b92d83719b3fddc5c08817d41726d54c57d329e 100644
--- a/urunler/dermokozmetik/product/template.html
+++ b/urunler/dermokozmetik/product/template.html
@@ -819,199 +831,201 @@
     function saveFavorites() { 
         localStorage.setItem('serakinciGlobalFavorites', JSON.stringify(favorites)); 
         updateFavoritesCount(); 
     }
     function isFavorite(productId, currentSegmentForCheck) { 
         return favorites.some(fav => fav.ProductId === productId && fav.Segment === currentSegmentForCheck); 
     }
     function updateFavoritesCount() { 
         const countEl = document.getElementById('favoritesCount');
         if(countEl) {
             countEl.textContent = favorites.length; 
             if (favorites.length > 0) {
                 countEl.style.display = 'inline-flex'; 
             } else {
                 countEl.style.display = 'none';
             }
         }
     }
     function toggleFavorite(product, btnElement) { 
         const productId = product.ProductId; 
         if (isFavorite(productId, segment)) { 
             favorites = favorites.filter(fav => !(fav.ProductId === productId && fav.Segment === segment));
             showTooltip(btnElement, 'Favorilerden çıkarıldı!', 'favoriteTooltip');
             btnElement.classList.remove('favorited');
         } else {
-            favorites.push({ 
-                ProductId: productId, 
-                ProductName: product.ProductName, 
-                ImageUrl: product.ImageUrl || (product.ProductImages?.[0]?.ImageUrl) || FALLBACK_IMAGE_URL,
-                Category: product.cat || 'Dermokozmetik', 
-                Segment: segment, 
-                Slug: slugify(product.ProductName) 
+            favorites.push({
+                ProductId: productId,
+                ProductName: product.ProductName,
+                ImageUrl: localImageUrl(product),
+                Category: product.cat || 'Dermokozmetik',
+                Segment: segment,
+                Slug: slugify(product.ProductName)
             });
             showTooltip(btnElement, 'Favorilere eklendi!', 'favoriteTooltip');
             btnElement.classList.add('favorited');
         }
         saveFavorites();
     }
     function displayFavoritesModal() { 
         const listEl = document.getElementById('favoritesList');
         const noFavMsg = document.getElementById('noFavoritesMessage');
         if (!listEl || !noFavMsg) return;
         listEl.innerHTML = '';
         if (favorites.length === 0) {
             noFavMsg.style.display = 'block';
         } else {
             noFavMsg.style.display = 'none';
             favorites.forEach(fav => {
                 const item = document.createElement('div');
                 item.className = 'modal-list-item';
                 item.innerHTML = `
-                    <a href="/urunler/${fav.Segment}/product/${fav.Slug}/" title="${fav.ProductName} Detayı">
+                    <a href="/urunler/${fav.Segment}/product-pages/${fav.Slug}/" title="${fav.ProductName} Detayı">
                         <img src="${fav.ImageUrl}" alt="${fav.ProductName}" loading="lazy" onerror="this.src='${FALLBACK_IMAGE_URL}'">
                     </a>
                     <div class="modal-list-item-info">
-                        <a href="/urunler/${fav.Segment}/product/${fav.Slug}/" class="name" title="${fav.ProductName} Detayı">${fav.ProductName}</a>
+                        <a href="/urunler/${fav.Segment}/product-pages/${fav.Slug}/" class="name" title="${fav.ProductName} Detayı">${fav.ProductName}</a>
                         <span class="category">${fav.Category} (${fav.Segment === 'dermokozmetik' ? 'Dermo' : 'Hayvan Sağ.'})</span>
                     </div>
                     <div class="modal-list-item-actions">
                         <button class="remove-fav-btn" data-product-id="${fav.ProductId}" data-segment="${fav.Segment}" title="Favorilerden Çıkar">
                             <svg viewBox="0 0 24 24" fill="#e74c3c" width="20" height="20"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
                         </button>
                     </div>`;
                 listEl.appendChild(item);
             });
             document.querySelectorAll('.remove-fav-btn').forEach(btn => {
                 btn.onclick = (e) => {
                     const idToRemove = e.currentTarget.dataset.productId;
                     const segmentToRemove = e.currentTarget.dataset.segment;
                     favorites = favorites.filter(f => !(f.ProductId == idToRemove && f.Segment == segmentToRemove) );
                     saveFavorites();
                     displayFavoritesModal(); 
                     if (currentProduct && currentProduct.ProductId == idToRemove && segment == segmentToRemove) {
                         const favBtnOnPage = document.getElementById('favoriteBtn');
                         if (favBtnOnPage) favBtnOnPage.classList.remove('favorited');
                     }
                 };
             });
         }
     }
     function setupFavoritesModalInteractions() { 
         const modal = document.getElementById('favoritesModal');
         const link = document.getElementById('favoritesNavLink');
         const closeBtn = modal.querySelector('.close-button');
         
         if (link && modal && closeBtn) {
             link.onclick = (e) => { e.preventDefault(); displayFavoritesModal(); modal.classList.add('show'); };
             closeBtn.onclick = () => modal.classList.remove('show');
             modal.onclick = (e) => { if (e.target === modal) modal.classList.remove('show'); };
         }
     }
 
     async function loadAllProductsForSearch() { 
         try {
             const productsResponse = await fetch(API_BASE_PATH + 'products.json'); 
             if (!productsResponse.ok) throw new Error(`Dermokozmetik ürünleri (arama için) yüklenemedi (${productsResponse.status})`);
             allProducts = await productsResponse.json();
+            applyLocalImages(allProducts);
         } catch (error) {
             console.error('Arama için dermokozmetik ürünleri yüklenirken hata:', error);
             allProducts = [];
         }
     }
     
     function updateMetaTags(product, productDetailOrBiodermaData) {
         const ogUrlMeta = document.querySelector('meta[property="og:url"]');
         if (ogUrlMeta) ogUrlMeta.content = window.location.href;
 
         const pageTitle = `${product.ProductName} | Dermokozmetik | Serakıncı`;
         document.title = pageTitle; 
         const ogTitleMeta = document.querySelector('meta[property="og:title"]');
         if (ogTitleMeta) ogTitleMeta.content = pageTitle;
         const twitterTitleMeta = document.querySelector('meta[name="twitter:title"]');
         if (twitterTitleMeta) twitterTitleMeta.content = pageTitle;
 
         const description = productDetailOrBiodermaData?.description || product.ProductShortDescription || `Serakıncı'da ${product.ProductName} dermokozmetik ürününü inceleyin.`;
         const descMeta = document.querySelector('meta[name="description"]');
         if (descMeta) descMeta.content = description.substring(0,160);
         const ogDescMeta = document.querySelector('meta[property="og:description"]');
         if (ogDescMeta) ogDescMeta.content = description.substring(0,160);
         const twitterDescMeta = document.querySelector('meta[name="twitter:description"]');
         if (twitterDescMeta) twitterDescMeta.content = description.substring(0,160);
 
-        const imageUrl = product.ImageUrl || (product.ProductImages && product.ProductImages.length > 0 ? product.ProductImages[0].ImageUrl : FALLBACK_IMAGE_URL);
+        const imageUrl = localImageUrl(product);
         if (imageUrl) {
             try {
               const absoluteImageUrl = new URL(imageUrl, window.location.origin).href;
               const ogImageMeta = document.querySelector('meta[property="og:image"]');
               if (ogImageMeta) ogImageMeta.content = absoluteImageUrl;
               const twitterImageMeta = document.querySelector('meta[name="twitter:image"]');
               if (twitterImageMeta) twitterImageMeta.content = absoluteImageUrl;
             } catch (e) {
               console.warn("Geçersiz resim URL'si (meta):", imageUrl, e);
               const absoluteDefaultImageUrl = new URL(FALLBACK_IMAGE_URL, window.location.origin).href;
               const ogImageMeta = document.querySelector('meta[property="og:image"]');
               if (ogImageMeta) ogImageMeta.content = absoluteDefaultImageUrl;
               const twitterImageMeta = document.querySelector('meta[name="twitter:image"]');
               if (twitterImageMeta) twitterImageMeta.content = absoluteDefaultImageUrl;
             }
         }
         
         const schemaScript = document.querySelector('script[type="application/ld+json"]');
         if (schemaScript) {
             try {
                 const schemaData = JSON.parse(schemaScript.textContent);
                 schemaData.name = product.ProductName;
                 schemaData.description = description;
                 if (imageUrl) { try { schemaData.image = new URL(imageUrl, window.location.origin).href; } catch(e){ schemaData.image = new URL(FALLBACK_IMAGE_URL, window.location.origin).href; } }
                 if (product.brand) schemaData.brand = { "@type": "Brand", "name": product.brand };
                 schemaScript.textContent = JSON.stringify(schemaData, null, 2);
             } catch (e) {
                 console.error("Schema.org JSON parse/update error:", e);
             }
         }
     }
 
     async function loadProductDetail(slugFromUrl) { 
       const productDetailContainer = document.getElementById('productDetailContainer');
       if (productDetailContainer) {
         productDetailContainer.innerHTML = `<div class="loading-container"><div class="loading-spinner"></div><p class="loading-text">Ürün bilgileri yükleniyor...</p></div>`;
       }
 
       try {
         if (allProducts.length === 0) { await loadAllProductsForSearch(); } 
         if (allProducts.length === 0) {
             showError('Ürün veritabanına erişilemiyor. Lütfen daha sonra tekrar deneyin.');
             return;
         }
         
         currentProduct = null; 
         for (const p of allProducts) {
             if (!p.ProductName) continue; 
             const productNameSlug = slugify(p.ProductName); 
             if (productNameSlug === slugFromUrl) {
-                currentProduct = p; 
+                currentProduct = p;
+                currentProduct.ImageUrl = localImageUrl(p);
                 break;
             }
         }
 
         if (!currentProduct) {
             console.warn(`loadProductDetail (dermokozmetik): "${slugFromUrl}" slug'ı ile ürün products.json'da bulunamadı.`);
             showError('Aradığınız ürün bulunamadı veya bağlantı hatalı. Lütfen kontrol edin.');
             return;
         }
         
         let productDetail = null; 
         try {
             const detailsResponse = await fetchJsonData('detay-product.json');
             productDetail = detailsResponse.find(detail => detail.ProductId === currentProduct.ProductId);
         } catch (e) {
             console.warn("detay-product.json yüklenemedi veya işlenemedi:", e);
         }
 
         let biodermaExtraData = null; 
         if (currentProduct.brand && currentProduct.brand.toLowerCase() === 'bioderma' && currentProduct.ProductId) {
           try {
               const biodermaResponse = await fetchJsonData('products_bioderma.json');
               biodermaExtraData = biodermaResponse.find(bProd => bProd.ProductId === currentProduct.ProductId); 
               if (!biodermaExtraData) {
                   console.warn(`Bioderma ürünü (${currentProduct.ProductName}) için products_bioderma.json dosyasında eşleşen ProductId (${currentProduct.ProductId}) bulunamadı.`);
diff --git a/urunler/dermokozmetik/product/template.html b/urunler/dermokozmetik/product/template.html
index fc4830fd5651a96c44d5d1d0af359f7dbfff3d5e..9b92d83719b3fddc5c08817d41726d54c57d329e 100644
--- a/urunler/dermokozmetik/product/template.html
+++ b/urunler/dermokozmetik/product/template.html
@@ -1021,51 +1035,51 @@
           }
         }
 
         displayProductDetail(currentProduct, productDetail, biodermaExtraData); 
         updateMetaTags(currentProduct, biodermaExtraData || productDetail); // Bioderma açıklaması öncelikli
 
       } catch (error) {
         console.error('loadProductDetail (dermokozmetik): Ürün yüklenirken genel hata:', error);
         showError(`Ürün yüklenirken bir hata oluştu. Lütfen daha sonra tekrar deneyin.`);
       }
     }
 
     // displayProductDetail fonksiyonu, bir önceki yanıttaki gibi kalacak,
     // sadece `biodermaExtraData` parametresini alacak ve tab oluşturma mantığı güncellenecek.
     // Bu fonksiyon çok uzun olduğu için burada tekrar etmiyorum, bir önceki yanıttan alınabilir.
     // Anahtar değişiklikler: `biodermaExtraData.description` kullanımı,
     // `biodermaExtraData.series` gösterimi, `biodermaExtraData.tabs` ile ek sekmeler,
     // ve `biodermaExtraData.imagesLocal` ile galeri oluşturma.
     // **Aşağıda sadece güncellenmiş displayProductDetail fonksiyonunu veriyorum:**
     function displayProductDetail(product, productDetail, biodermaExtraData = null) { 
       const detailContainer = document.getElementById('productDetailContainer');
       if (!detailContainer) return; 
       
       currentProduct = product; 
 
-      let mainImageUrl = product.ImageUrl || (product.ProductImages && product.ProductImages.length > 0 ? product.ProductImages[0].ImageUrl : FALLBACK_IMAGE_URL);
+      let mainImageUrl = localImageUrl(product);
       let galleryImages = [mainImageUrl];
 
       if (biodermaExtraData && biodermaExtraData.imagesLocal && biodermaExtraData.imagesLocal.length > 0) {
           galleryImages = biodermaExtraData.imagesLocal.map(localPath => {
               // Ters taksimleri düz taksimle değiştir ve '/urunler/api/' base path'ini kullan
               // Eğer imagesLocal zaten tam URL ise bu kısım gerekmeyebilir.
               // Bu örnekte, JSON'daki gibi 'urunler\\api\\gorseller\\...' formatında olduğunu varsayıyoruz
               return "/" + localPath.replace(/\\/g, '/'); 
           });
           if (galleryImages.length > 0) mainImageUrl = galleryImages[0]; 
       }
 
       const imageHTML = `
         <div class="product-main-image-wrapper" id="mainProductImageWrapper">
             <img src="${mainImageUrl}" alt="${product.ProductName}" class="product-main-image-modern" id="mainProductImageElement" onerror="this.onerror=null; this.src='${FALLBACK_IMAGE_URL}';">
         </div>
         ${galleryImages.length > 1 ? `
         <div class="product-thumbnails">
             ${galleryImages.map((imgSrc, index) => `<img src="${imgSrc}" alt="${product.ProductName} - Ek Görsel ${index + 1}" onclick="window.updateMainImage('${imgSrc}', this)" class="${index === 0 ? 'active-thumbnail' : ''}" onerror="this.style.display='none';">`).join('')}
         </div>` : ''}
       `;
       
       const favProductId = product.ProductId;
       const isFav = isFavorite(favProductId, segment);
       const favoriteButtonHTML = `
diff --git a/urunler/dermokozmetik/product/template.html b/urunler/dermokozmetik/product/template.html
index fc4830fd5651a96c44d5d1d0af359f7dbfff3d5e..9b92d83719b3fddc5c08817d41726d54c57d329e 100644
--- a/urunler/dermokozmetik/product/template.html
+++ b/urunler/dermokozmetik/product/template.html
@@ -1166,52 +1180,52 @@
 
                     // "Kaynakları görün" linklerini stilize et
                     doc.querySelectorAll('a[data-toggle="modal"][data-target*="-source-modal"]').forEach(link => {
                         link.classList.add('read-more-btn'); // Buton stili ver
                         link.style.textDecoration = 'none';
                     });
 
                     tabHtmlContent = doc.body.innerHTML;
                 }
 
 
                 const tabId = `biodermaTab_${bTab.id || index + 1}`; 
                 tabNavigationHTML += `<button class="tab-link-modern" data-tab="${tabId}">${bTab.title || `Ek Detay ${index + 1}`}</button>`;
                 tabContentHTML += `<div id="${tabId}" class="tab-pane-modern">${tabHtmlContent}</div>`;
             });
           }
       }
 
 
       const relatedProductsTitle = product.cat ? `"${product.cat}" Kategorisindeki Diğer Ürünler` : "Benzer Ürünler";
       const relatedProducts = allProducts.filter(p => p.ProductName && p.cat === product.cat && slugify(p.ProductName) !== slugify(product.ProductName)).slice(0, 10);
       let relatedProductsHTML = '';
       if (relatedProducts.length > 0) {
         relatedProductsHTML = `<div class="related-products-section-modern"><h2 class="related-products-title-modern">${relatedProductsTitle}</h2><div class="related-products-carousel"><div class="carousel-arrow prev" onclick="window.scrollCarousel(-1, 'relatedProductsContainer')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg></div><div class="related-products-container" id="relatedProductsContainer">`;
         relatedProducts.forEach(rp => {
-          let rpImageUrl = rp.ImageUrl || (rp.ProductImages && rp.ProductImages.length > 0 ? rp.ProductImages[0].ImageUrl : FALLBACK_IMAGE_URL);
-          relatedProductsHTML += `<a href="/urunler/${segment}/product/${slugify(rp.ProductName)}/" class="related-product-card"><img src="${rpImageUrl}" alt="${rp.ProductName}" onerror="this.onerror=null; this.src='${FALLBACK_IMAGE_URL}';"><div class="info"><div class="name">${rp.ProductName}</div><div class="category">${rp.cat || 'Belirtilmemiş'}</div></div></a>`;
+          let rpImageUrl = localImageUrl(rp);
+          relatedProductsHTML += `<a href="/urunler/${segment}/product-pages/${slugify(rp.ProductName)}/" class="related-product-card"><img src="${rpImageUrl}" alt="${rp.ProductName}" onerror="this.onerror=null; this.src='${FALLBACK_IMAGE_URL}';"><div class="info"><div class="name">${rp.ProductName}</div><div class="category">${rp.cat || 'Belirtilmemiş'}</div></div></a>`;
         });
         relatedProductsHTML += `</div><div class="carousel-arrow next" onclick="window.scrollCarousel(1, 'relatedProductsContainer')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg></div></div></div>`;
       } else {
         relatedProductsHTML = `<div class="related-products-section-modern"><h2 class="related-products-title-modern">${relatedProductsTitle}</h2><p style="text-align:center; color:var(--text-medium); padding:1rem 0;">Bu kategoriye ait başka ürün bulunmamaktadır.</p></div>`;
       }
 
       const disclaimerHTML = `
       <div class="disclaimer-box-modern">
         <strong>Yasal Uyarı</strong>
         <span>Bu sitede yer alan ürün bilgilerinin tamamı genel bilgilendirme amaçlıdır ve profesyonel bir sağlık uzmanı tavsiyesinin yerini almaz. Ürünlerin kullanımı öncesinde mutlaka doktorunuza veya eczacınıza danışınız. Serakıncı Limited, ürün içerikleri ve açıklamalarının doğruluğu veya güncelliği konusunda herhangi bir sorumluluk kabul etmez. Ürün bilgileri zamanla değişebilir, en güncel bilgi için üretici firma ve resmi ürün kılavuzu dikkate alınmalıdır.</span>
       </div>`;
       
       const contactHTML = `
       <div class="contact-card-modern">
         <div class="contact-title-modern">Bizimle İletişime Geçin</div>
         <div class="contact-bar-modern"></div>
         <p class="contact-intro-text">Ürünlerimiz veya hizmetlerimiz hakkında daha fazla bilgi almak, soru sormak veya öneride bulunmak için aşağıdaki kanallardan bize ulaşabilirsiniz:</p>
         <div class="contact-grid">
           <div class="contact-item"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z" /></svg><div><span class="contact-label-modern">Telefon</span><a href="tel:+903923662594" class="contact-link-modern">+90 392 366 25 94</a></div></div>
           <div class="contact-item"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75" /></svg><div><span class="contact-label-modern">E-posta</span><a href="mailto:info@serakinci.com" class="contact-link-modern">info@serakinci.com</a></div></div>
           <div class="contact-item"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" /><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" /></svg><div><span class="contact-label-modern">Adres</span><span class="contact-address-text">Sht. Ziya Sok. No:1-2 99450<br>Gazimağusa - KKTC, Mersin 10 Turkey</span></div></div>
           <div class="contact-item"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M21.45 17.36c-.32-.1-.66-.16-1-.16-1.02 0-2.04.21-2.97.64-.34.16-.73.08-1-.16l-3.28-3.28c.43-.93.64-1.95.64-2.97 0-.34-.06-.68-.16-1l3.28-3.28c.24-.23.32-.62.16-1-.43-.93-.64-1.95-.64-2.97 0-.34.06-.68.16-1 .09-.28.03-.59-.18-.8l-1.09-1.09c-.21-.21-.52-.27-.8-.18-1 .1-1.98.38-2.87.82-.09.04-.18.07-.26.12L5.12 7.25c-.04.09-.07.17-.12.26C4.18 8.4 3.9 9.38 3.81 10.38c-.09.28-.03.59.18.8l1.09 1.09c.21.21.52.27.8.18 1-.1 1.98-.38 2.87-.82.09-.04.18.07.26-.12l5.75-5.75c.04-.09.07-.17.12-.26.89-.44 1.87-.72 2.87-.82.28-.09.59-.03.8.18l1.09 1.09c.21.21.27.52.18.8-.1 1-.38 1.98-.82 2.87-.04-.09-.07.18-.12.26L10.38 17c-.09.04-.17.07-.26.12-.89-.44-1.87.72-2.87.82-.28-.09-.59-.03-.8-.18l-1.09-1.09c-.21-.21-.27-.52-.18-.8.1-1 .38-1.98.82 2.87.04-.09.07.18.12-.26l.01-.01c.01 0 .01 0 0 0L17 5.12c.09-.04.17-.07.26-.12.9-.43 1.88-.64 2.9-.64.34 0 .68.06 1 .16.28.09.5.29.62.56.15.34.17.73.05 1.07-.27.78-.63 1.52-1.06 2.2-.01.01-.01.02-.02.03l-5.52 5.52c-.01.01-.02.01-.03.02-.68.43-1.42.79-2.2 1.06-.34.12-.62.34-.75.62s-.16.61-.05 1.07c.27.78.63 1.52 1.06 2.2.01.01.01.02.02.03l.01.01c.01 0 .01 0 0 0zM6.5 10.5c0 .28.22.5.5.5s.5-.22.5-.5-.22-.5-.5-.5-.5.22-.5.5z"/></svg><div><span class="contact-label-modern">Fax</span><a href="fax:+903923661585" class="contact-link-modern">+90 392 366 15 85</a></div></div>
         </div>
         <div class="firm-social-media">
             <span class="social-label">Sosyal Medyada Biz</span>
diff --git a/urunler/dermokozmetik/product/template.html b/urunler/dermokozmetik/product/template.html
index fc4830fd5651a96c44d5d1d0af359f7dbfff3d5e..9b92d83719b3fddc5c08817d41726d54c57d329e 100644
--- a/urunler/dermokozmetik/product/template.html
+++ b/urunler/dermokozmetik/product/template.html
@@ -1396,126 +1410,127 @@
     async function setupProductSearch() { 
         const pageSearchInput = document.getElementById('productSearchInput');
         const pageResultsDropdown = document.getElementById('searchResultsDropdown');
         const pageResultsList = document.getElementById('searchResultsList');
 
         if (pageSearchInput && pageResultsDropdown && pageResultsList) {
             if (allProducts.length === 0 && !getSlugFromUrl()) { 
                 await loadAllProductsForSearch(); 
             }
 
             pageSearchInput.addEventListener('input', function(e) {
                 const searchTerm = e.target.value.toLocaleLowerCase('tr-TR');
                 clearTimeout(searchDebounceTimer);
                 if (searchTerm.length < 2) { pageResultsDropdown.style.display = 'none'; pageResultsList.innerHTML = ''; return; }
 
                 searchDebounceTimer = setTimeout(async () => {
                     if(allProducts.length === 0) { 
                         await loadAllProductsForSearch(); 
                         if (allProducts.length === 0) { pageResultsList.innerHTML = '<li class="no-results">Ürünler yüklenemedi.</li>'; pageResultsDropdown.style.display = 'block'; return; }
                     }
                     const filtered = allProducts.filter(product => product.ProductName && product.ProductName.toLocaleLowerCase('tr-TR').includes(searchTerm));
                     pageResultsList.innerHTML = ''; 
                     if (filtered.length > 0) {
                         filtered.slice(0, 7).forEach(product => { 
                             const listItem = document.createElement('li');
-                            let rpImageUrl = product.ImageUrl || (product.ProductImages && product.ProductImages.length > 0 ? product.ProductImages[0].ImageUrl : FALLBACK_IMAGE_URL);
+                            let rpImageUrl = localImageUrl(product);
                             listItem.innerHTML = `
-                                <a href="/urunler/${segment}/product/${slugify(product.ProductName)}/">
+                                <a href="/urunler/${segment}/product-pages/${slugify(product.ProductName)}/">
                                     <img src="${rpImageUrl}" alt="${product.ProductName}" class="suggestion-image" onerror="this.onerror=null; this.src='${FALLBACK_IMAGE_URL}';">
                                     <span class="suggestion-name">${product.ProductName}</span>
                                     ${product.cat ? `<span class="suggestion-category">${product.cat}</span>` : ''}
                                 </a>`;
                             pageResultsList.appendChild(listItem);
                         });
                     } else { pageResultsList.innerHTML = '<li class="no-results">"' + searchTerm + '" için sonuç bulunamadı.</li>'; }
                     pageResultsDropdown.style.display = 'block';
                 }, 300); 
             });
 
             pageSearchInput.addEventListener('focus', function() {
                 if (pageSearchInput.value.length >= 2 && pageResultsList.children.length > 0 && 
                     !(pageResultsList.firstChild.classList && pageResultsList.firstChild.classList.contains('no-results')) &&
                     !pageResultsList.firstChild.textContent.includes("yükleniyor")) {
                      pageResultsDropdown.style.display = 'block';
                 }
             });
         }
         
         const headerSearchInput = document.getElementById('headerProductSearchInput');
         const headerSearchWrapper = document.querySelector('.header-search-wrapper');
         const headerResultsDropdown = document.getElementById('headerSearchResultsDropdown');
         const headerResultsList = document.getElementById('headerSearchResultsList');
         
         if (!headerSearchInput || !headerSearchWrapper || !headerResultsDropdown || !headerResultsList) {
             console.warn("Header arama elementleri bulunamadı, bu özellik çalışmayabilir.");
         } else {
              if (allProductsForHeaderSearch.length === 0) { 
                 try { 
                     const [dermoProducts, animalProducts] = await Promise.all([
                         fetchJsonData('products.json').catch(e => { console.error("Dermo products for header search failed:", e); return []; }), 
                         fetchJsonData('hayvan-sagligi.json').catch(e => { console.error("Animal products for header search failed:", e); return []; }) 
                     ]);
                     allProductsForHeaderSearch = [
-                        ...dermoProducts.map(p => ({...p, segment: 'dermokozmetik', slugFn: slugify})), 
-                        ...animalProducts.map(p => ({...p, segment: 'hayvan-sagligi', slugFn: (text) => { 
+                        ...dermoProducts.map(p => ({...p, segment: 'dermokozmetik', slugFn: slugify})),
+                        ...animalProducts.map(p => ({...p, segment: 'hayvan-sagligi', slugFn: (text) => {
                                 if (text === null || typeof text === 'undefined') return 'isimsiz-urun';
                                 const trMapHS = { 'ç': 'c', 'Ç': 'c', 'ğ': 'g', 'Ğ': 'g', 'ı': 'i', 'İ': 'i', 'ö': 'o', 'Ö': 'o', 'ş': 's', 'Ş': 's', 'ü': 'u', 'Ü': 'u' };
                                 return String(text).replace(/[\u00C7\u00E7\u011F\u011E\u0131\u0130\u00D6\u00F6\u015E\u015F\u00DC\u00FC]/g, match => trMapHS[match] || match).normalize('NFD').replace(/[\u0300-\u036f]/g, '').toLowerCase().trim().replace(/[()]/g, '-').replace(/(\d+)\s*(ml|gr|lt|kg|cc|mcg|mg|iu|doz|enj|wsp|oral|flakon|adet|ad|m|g|l|k|d)\b/gi, '$1-$2').replace(/\s+/g, '-').replace(/[^\w-]+/g, '').replace(/--+/g, '-').replace(/^-+|-+$/g, '') || 'isimsiz-urun';
                             }
                         }))
                     ];
+                    applyLocalImages(allProductsForHeaderSearch);
                 } catch (e) { 
                     console.error("Header arama için genel ürünler yüklenemedi:", e); 
                 }
             }
 
             headerSearchInput.addEventListener('input', function(e) {
                 const searchTerm = e.target.value.trim().toLocaleLowerCase('tr-TR');
                 clearTimeout(headerSearchDebounceTimer);
                 if (searchTerm.length < 2) { 
                     headerResultsDropdown.style.display = 'none'; 
                     headerResultsList.innerHTML = ''; 
                     headerSearchWrapper.classList.remove('search-active');
                     return; 
                 }
                 headerSearchWrapper.classList.add('search-active');
                 headerSearchDebounceTimer = setTimeout(() => {
                     const filtered = allProductsForHeaderSearch.filter(product => 
                         (product.ProductName || '').toLocaleLowerCase('tr-TR').includes(searchTerm) ||
                         (product.ProductCode || '').toLocaleLowerCase('tr-TR').includes(searchTerm)
                     ).slice(0, 7);
                     headerResultsList.innerHTML = ''; 
                     if (filtered.length > 0) {
                         filtered.forEach(product => { 
                             const listItem = document.createElement('li');
-                            let rpImageUrl = product.ImageUrl || (product.ProductImages?.[0]?.ImageUrl) || FALLBACK_IMAGE_URL;
+                            let rpImageUrl = localImageUrl(product);
                             const productSegForLink = product.segment; 
                             const productSlug = product.slugFn(product.ProductName); 
 
                             listItem.innerHTML = `
-                                <a href="/urunler/${productSegForLink}/product/${productSlug}/">
+                                <a href="/urunler/${productSegForLink}/product-pages/${productSlug}/">
                                     <img src="${rpImageUrl}" alt="${product.ProductName}" class="suggestion-image" onerror="this.src='${FALLBACK_IMAGE_URL}'">
                                     <span class="suggestion-name">${product.ProductName}</span>
                                     <span class="suggestion-category">${product.cat || product.kategori || (productSegForLink === 'dermokozmetik' ? 'Dermo' : 'Hayvan S.')}</span>
                                 </a>`;
                             headerResultsList.appendChild(listItem);
                         });
                     } else {
                         headerResultsList.innerHTML = '<li class="no-results">Sonuç bulunamadı.</li>';
                     }
                     headerResultsDropdown.style.display = 'block';
                 }, 300); 
             });
 
             headerSearchInput.addEventListener('focus', function() {
                 headerSearchWrapper.classList.add('search-active');
                 if (headerSearchInput.value.length >= 2 && headerResultsList.children.length > 0 && headerResultsList.firstChild.className !== 'no-results') {
                     headerResultsDropdown.style.display = 'block';
                 }
             });
 
             headerSearchInput.addEventListener('blur', function() {
                 setTimeout(() => {
                     if (!G_isMouseOverHeaderDropdown) { 
                         headerResultsDropdown.style.display = 'none';
                         if (headerSearchInput.value.length < 2) { 
 
EOF
)